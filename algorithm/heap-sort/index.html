<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Test</title>
    <script>
    function maxHeapify(array, index, heapSize) {
        var iMax = index,
            iLeft = 2 * index + 1,
            iRight = 2 * (index + 1);
        if (iLeft < heapSize && array[index] < array[iLeft]) {
            iMax = iLeft;
        }
        if (iRight < heapSize && array[iMax] < array[iRight]) {
            iMax = iRight;
        }
        if (iMax != index) {
            swap(array, iMax, index);
            maxHeapify(array, iMax, heapSize);
        }
    }

    function maxHeapify_iterative(array, index, heapSize) {
        var iMax, iLeft, iRight;
        while (true) {
            iMax = index;
            iLeft = 2 * index + 1;
            iRight = 2 * (index + 1);
            if (iLeft < heapSize && array[index] < array[iLeft]) {
                iMax = iLeft;
            }
            if (iRight < heapSize && array[iMax] < array[iRight]) {
                iMax = iRight;
            }
            if (iMax != index) {
                swap(array, iMax, index);
                index = iMax;
            } else {
                break;
            }
        }
    }

    function buildMaxHeap(array, heapSize) {
        var i,
            iParent = Math.floor((heapSize - 1) / 2);

        for (i = iParent; i >= 0; i--) {
            maxHeapify(array, i, heapSize);
        }
    }

    function heapSort(array, heapSize) {
        buildMaxHeap(array, heapSize);
        for (var i = heapSize - 1; i > 0; i--) {
            swap(array, 0, i);
            maxHeapify(array, 0, i);
        }
    }

    function swap(array, i, j) {
        var temp = array[i];
        array[i] = array[j];
        array[j] = temp;
    }
    </script>
</head>

<body>
    <script>
    const heap = [9, 3, 2, 16, 4, 1, 14, 10, 8, 7];
    console.log(heap);
    heapSort(heap, 10);
    console.log(heap);
    </script>
</body>

</html>